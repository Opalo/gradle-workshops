apply plugin: 'ear'

dependencies {
    def profile = project.properties['profile'] ? project.profile : 'local_int'

    deploy project(':client')
    deploy project(":server:${profile.endsWith('int') ? 'int' : 'ext'}")
}

ear {
    appDirName 'src/main/app'
    libDirName 'APP-INF/lib'

    deploymentDescriptor {
        applicationName = 'System EAR'
        initializeInOrder = true
        displayName = 'system ear'
        description = 'EAR wih client and server'
    }
}